<!DOCTYPE HTML>
<link rel="stylesheet" href="theme/default/style.css" type="text/css">

<script src="OpenLayers.js"></script>
<script src="jquery.min.js"></script>
<script>
$(function() {
map = new OpenLayers.Map("demoMap");
map.addLayer(new OpenLayers.Layer.OSM());
var lonlat = new OpenLayers.LonLat(12.482520,41.892916).transform(new OpenLayers.Projection("EPSG:4326"),new OpenLayers.Projection("EPSG:900913"));
map.setCenter(lonlat);
map.zoomTo(13);

map.events.register("move", map, function() {
    var center = map.getCenter().transform(new OpenLayers.Projection("EPSG:900913"),new OpenLayers.Projection("EPSG:4326"));
    $('#lat_bitcoin').val(center.lat);
    $('#lon_bitcoin').val(center.lon);
});

    var url = 'https://script.google.com/macros/s/AKfycby9mqgNNuESDzQP1YPs1UcUYKZw7BfKQk88jZKxNvjTWdFrQS03/exec';

    $('#submit_bitcoin').submit(function(e) {
        e.preventDefault();
        e.stopPropagation();
        var $cont = $('#cont');
        $cont.text('loading');

        $.getJSON(url + '?callback=?', { 
            email: $('#email_bitcoin').val(), 
            lat: $('#lat_bitcoin').val(),
            lon: $('#lon_bitcoin').val(),
            radius: $('#radius_bitcoin').val()
        }, function(data) {
            $cont.html(JSON.stringify(data));

        });
    });


});

</script>
<form method="get" id="submit_bitcoin">
    <input type="email" placeholder="email" value="" id="email_bitcoin"/>
    <br>
    <input type="text" placeholder="lat" value="41.892916" id="lat_bitcoin"/>
    <br>
    <input type="text" placeholder="lon" value="12.482520" id="lon_bitcoin"/>
    <br>
    Radius in KM
    <input type="text" placeholder="radius" id="radius_bitcoin" value="10"/>
    <br>
    <input type="submit" />

</form>

<div id="demoMap" style="width: 500px;height:500px"></div>

<div id="cont">

</div>

